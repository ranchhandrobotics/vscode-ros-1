<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Debug ROS Nodes - Visual Studio Code Robot Developer Extensions for ROS 1</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Debug ROS Nodes";
        var mkdocs_page_input_path = "debug-support.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> Visual Studio Code Robot Developer Extensions for ROS 1
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Debugging</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Debug ROS Nodes</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#attach">Attach</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#attaching-to-a-python-node">Attaching to a Python node</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#attaching-to-a-c-node">Attaching to a C++ node</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#launch">Launch</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#prerequisite">Prerequisite</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#launch-and-debug-python-and-c-nodes">Launch and debug Python and C++ nodes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#use-tasks-to-automatically-build-before-starting-debug-session">Use tasks to automatically build before starting debug session</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#use-tasks-to-automatically-build-and-start-rosmaster">Use tasks to automatically build and start rosmaster</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#note">Note</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="launchdebugging.html">Launchdebugging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Specifications</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="spec/debug-ros-nodes.html">Debug ROS nodes with vscode-ros</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Visual Studio Code Robot Developer Extensions for ROS 1</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Debugging</li>
      <li class="breadcrumb-item active">Debug ROS Nodes</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ranch-hand-robotics/rde-ros-1/edit/master/docs/debug-support.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="debug-ros-nodes">Debug ROS Nodes</h1>
<p>One of the key goals of <code>vscode-ros</code> is to provide a streamlined debugging experience for ROS nodes.
To achieve this, this extension aims to help developers utilize the debugging capabilities provided by Visual Studio Code.
This document covers instructions of how to use such functionalities.</p>
<p>Read more about the design and related discussions on the debugging functionalities in our <a href="spec/debug-ros-nodes.html">design document</a>.</p>
<h2 id="attach">Attach</h2>
<p><code>vscode-ros</code> enables a bootstrapped debugging experience for debugging a ROS (Python or C++) node by attaching to the process.</p>
<p>To get started, create a <code>ros</code>-type debug configuration with an <code>attach</code> request: (use <kbd>Ctrl</kbd>-<kbd>Space</kbd> to bring up the autocomplete dropdown)</p>
<p><img alt="create attach debug configuration" src="assets/debug-support/create-attach-debug-config.gif" /></p>
<h3 id="attaching-to-a-python-node">Attaching to a Python node</h3>
<p><img alt="attach to a python node" src="assets/debug-support/attach-to-python.gif" /></p>
<h3 id="attaching-to-a-c-node">Attaching to a C++ node</h3>
<p><img alt="attach to a cpp node" src="assets/debug-support/attach-to-cpp.gif" /></p>
<h2 id="launch">Launch</h2>
<p><code>vscode-ros</code> enables a streamlined debugging experience for debugging a ROS (Python or C++) node in a ROS launch file similar to a native debug flow.</p>
<p>To get started, create a <code>ros</code>-type debug configuration with a <code>launch</code> request:</p>
<p><img alt="create launch debug configuration" src="assets/debug-support/create-launch-debug-config.gif" /></p>
<h3 id="prerequisite">Prerequisite</h3>
<p>There needs to be a running instance of <code>rosmaster</code>.
The launch-debug flow provided by <code>vscode-ros</code> will not spawn a <code>rosmaster</code>.</p>
<p><img alt="check roscore status" src="assets/debug-support/check-roscore-status.gif" /></p>
<h3 id="launch-and-debug-python-and-c-nodes">Launch and debug Python and C++ nodes</h3>
<p><img alt="launch and debug Python and C++ nodes" src="assets/debug-support/launch-and-debug-nodes.gif" /></p>
<h3 id="use-tasks-to-automatically-build-before-starting-debug-session"><a name="build_tasks"></a> Use tasks to automatically build before starting debug session</h3>
<p>The first thing you need to do is to create build task for your package(s) with enabled debug symbols. 
In the example below you can see a <code>catkin_make</code> build task that passes additional <code>-DCMAKE_BUILD_TYPE=Debug</code>  argument that switches build to use <code>Debug</code> configuration, which is the most suitable configuration for debugging, because it has 0 optimization level and includes debug symbols. Another option is to use <code>-DCMAKE_BUILD_TYPE=RelWithDebInfo</code> that also enables debug symbols, but uses <code>Release</code> settings for everything else and has optimizations enabled. <code>RelWithDebInfo</code> might be a go to build configuration for Windows users in order to avoid slowness of the debug CRT on Windows OS. You can read more about <a href="https://stackoverflow.com/a/59314670/888545">CMAKE_BUILD_TYPE here</a></p>
<p><strong>Note: you might need to remove the old <code>build</code> folder to force rebuild in new configuraiton.</strong></p>
<div class="highlight"><pre><span></span><code>{
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;make_debug&quot;,
            &quot;type&quot;: &quot;catkin_make&quot;,
            &quot;args&quot;: [
                &quot;--directory&quot;,
                &quot;${workspaceFolder}&quot;,
                &quot;-DCMAKE_BUILD_TYPE=Debug&quot;, // This extra argument enables built with debug symbols
            ],
            &quot;problemMatcher&quot;: [
                &quot;$catkin-gcc&quot;
            ],
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
        },
    ]
}
</code></pre></div>
<p>The next step would be to configure <code>.vscode/launch.json</code> and customize <code>preLaunchTask</code> to use <code>make_debug</code> task we created above.</p>
<div class="highlight"><pre><span></span><code>{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;ROS: Launch&quot;,
            &quot;type&quot;: &quot;ros&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;target&quot;: &quot;${workspaceFolder}/launch/some.launch&quot;, // &lt;&lt;&lt; Configure path to your launch file
            &quot;preLaunchTask&quot;: &quot;make_debug&quot;, // &lt;&lt;&lt; This is the task that will run before debugging starts
        }
    ]
}
</code></pre></div>
<h3 id="use-tasks-to-automatically-build-and-start-rosmaster">Use tasks to automatically build and start rosmaster</h3>
<p><strong>This is current BLOCKED BY VSCode Bug <a href="https://github.com/microsoft/vscode/issues/70283">70283</a>. This bug will prevent the second debugging session from starting if roscore background task is already running</strong></p>
<p>This section continues setup that was described <a href="#build_tasks">above</a>, so please complete that section and ensure you can build and debug with manually started roscore </p>
<p>We are going to define a new task named <code>make_debug_and_core</code> that is going to start both <code>make_debug</code> and <code>roscore: roscore</code> tasks. <code>roscore: roscore</code> is a background task that will continue running even after debuging session is over</p>
<div class="highlight"><pre><span></span><code>{
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        /// ... `make_debug` task definition as before
        {
            &quot;label&quot;: &quot;make_debug_and_core&quot;,
            &quot;dependsOn&quot;: [
                &quot;make_debug&quot;,
                &quot;roscore: roscore&quot;, // This task is provided by vscode-ros
            ]
        },
    ]
}
</code></pre></div>
<p>The next step would be to switch <code>preLaunchTask</code> to use <code>make_debug_and_core</code> task we created above.</p>
<div class="highlight"><pre><span></span><code>{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            // ... same as before
            &quot;preLaunchTask&quot;: &quot;make_debug_and_core&quot;,
        }
    ]
}
</code></pre></div>
<h2 id="note">Note</h2>
<ol>
<li>Debugging functionality provided by <code>vscode-ros</code> has dependencies on VS Code’s <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C++</a> and <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python</a> extensions, and those have dependencies on the version of VS Code. To ensure everything works as expected, please make sure to have everything up-to-date.</li>
<li>To debug a C++ executable, please make sure the binary is <a href="https://answers.ros.org/question/200155/how-to-debug-executable-built-with-catkin_make-without-roslaunch/">built with debug symbols</a> (e.g. <code>-DCMAKE_BUILD_TYPE=RelWithDebInfo</code>, read more about <a href="https://stackoverflow.com/a/59314670/888545">CMAKE_BUILD_TYPE here</a>).</li>
<li>To use VS Code's C++ extension with MSVC on Windows, please make sure the VS Code instance is launched from a Visual Studio command prompt.</li>
</ol>
<!-- link to files -->
<!-- external links -->
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="configuration.html" class="btn btn-neutral float-left" title="Configuration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="launchdebugging.html" class="btn btn-neutral float-right" title="Launchdebugging">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ranch-hand-robotics/rde-ros-1" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="configuration.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="launchdebugging.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
